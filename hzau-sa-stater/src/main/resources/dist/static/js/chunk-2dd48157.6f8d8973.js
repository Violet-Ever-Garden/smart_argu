(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2dd48157"],{"1c31":function(t,e,a){"use strict";a.d(e,"h",(function(){return n})),a.d(e,"g",(function(){return o})),a.d(e,"a",(function(){return r})),a.d(e,"f",(function(){return l})),a.d(e,"e",(function(){return s})),a.d(e,"d",(function(){return c})),a.d(e,"c",(function(){return d})),a.d(e,"b",(function(){return u}));a("99af"),a("a15b"),a("d81d");var i=a("b775");function n(t){return Object(i["a"])({url:"/trainingReport/page",method:"get",params:{cropId:t.cropId,studentId:t.studentId,limit:"10",page:"1",reviewStatus:t.reviewStatus,trainingReportName:t.trainingReportName,endTime:t.endTime,startTime:t.startTime}})}function o(t){return Object(i["a"])({url:"/trainingReport/teachertView",method:"get",params:{trainingReportId:t.trainingReportId}})}function r(t,e){return Object(i["a"])({url:"/trainingReport/addTrainingReport",method:"post",params:{studentId:e.studentId,batch:e.batch,cropId:e.cropId,trainingReportName:e.trainingReportName},data:t})}function l(t){return Object(i["a"])({url:"/trainingReport/studentView",method:"get",params:{trainingReportId:t.trainingReportId}})}function s(t){return Object(i["a"])({url:"/trainingReport/exportReport",method:"get",responseType:"blob",params:t,paramsSerializer:function(e){var a=e.classIds.map((function(t){return"classIds%5B%5D=".concat(t)})).join("&");return"".concat(a,"&cropId=").concat(t.cropId,"&teacherId=").concat(t.teacherId)}})}function c(t){return Object(i["a"])({url:"/trainingReport/deleteTrainingReport",method:"post",params:{trainingReportId:t.trainingReportId}})}function d(t){return Object(i["a"])({url:"/trainingReport/deleteTrainingReports",method:"post",params:{trainingReportIds:t}})}function u(t){return Object(i["a"])({url:"/trainingReport/changeReportByTeacher",method:"post",params:{comments:t.comments,score:t.score,trainingReportId:t.trainingReportId}})}},"5e81":function(t,e,a){"use strict";var i=a("cf65"),n=a.n(i);n.a},bfd8:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"persondata"},[a("div",{staticClass:"line"},[a("span",[t._v("|")]),a("span",[t._v(t._s(t.cropName))])]),a("div",{staticClass:"header"},[a("div",{staticClass:"left"},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"开始时间"},model:{value:t.startvalue,callback:function(e){t.startvalue=e},expression:"startvalue"}}),a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"结束时间"},model:{value:t.endvalue,callback:function(e){t.endvalue=e},expression:"endvalue"}}),a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.ChangeValue},model:{value:t.reviewStatus,callback:function(e){t.reviewStatus=e},expression:"reviewStatus"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入实训报告名称"},model:{value:t.inputName,callback:function(e){t.inputName=e},expression:"inputName"}}),a("el-button",{attrs:{size:"medium"},on:{click:function(e){return t.handleSearch(t.inputName)}}},[t._v("搜索")])],1),a("div",{staticClass:"right"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"student"==t.role,expression:"role=='student'"}],attrs:{size:"medium",round:""},on:{click:t.createNewReport}},[t._v("新增")]),a("el-button",{attrs:{size:"medium",round:""},on:{click:t.handledelete}},[t._v("删除")]),a("el-button",{attrs:{size:"medium",round:""},on:{click:t.goback}},[t._v("返回")])],1)]),a("div",{staticClass:"content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"77"}}),a("el-table-column",{attrs:{label:"序号",width:"130",type:"index",index:t.indexNumber}}),a("el-table-column",{attrs:{prop:"trainingReportName",label:"实训报告名称",width:"130"}}),a("el-table-column",{attrs:{prop:"studentName",label:"提交人",width:"120"}}),a("el-table-column",{attrs:{prop:"gradeName",label:"年级",width:"120","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"className",label:"班级",width:"120","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"score",label:"得分",width:"120","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"reviewStatus",label:"评阅状态",width:"130","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"batch",label:"批次",width:"130","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"createTime",label:"提交时间",width:"200","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleLook(e.$index,e.row)}}},[t._v("查看")]),"待评语"==e.row.reviewStatus?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.modifyReport(e.$index,e.row)}}},[t._v("编辑")]):t._e(),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handledeleteOne(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"编辑实训报告",visible:t.dialogFormVisible,width:"540px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"实训报告名称:",required:"","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.trainingReportName,callback:function(e){t.$set(t.form,"trainingReportName",e)},expression:"form.trainingReportName"}})],1),a("el-form-item",{attrs:{label:"批次:",required:"","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.batch,callback:function(e){t.$set(t.form,"batch",e)},expression:"form.batch"}})],1),a("el-form-item",{attrs:{label:"文件(.pdf):",required:"","label-width":t.formLabelWidth}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"1","auto-upload":!1,limit:1,"on-change":t.handleChange,"file-list":t.form.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("上传文件")])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["true"==t.isNew?a("el-button",{attrs:{type:"primary"},on:{click:t.submitNewReport}},[t._v("确 定")]):a("el-button",{attrs:{type:"primary"},on:{click:t.submitEditReport}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")])],1)],1)],1)])},n=[],o=(a("fb6a"),a("1c31")),r={name:"Persondata",data:function(){return{isNew:"true",cropId:"",cropName:"",role:"",inputName:"",reviewStatus:"",startvalue:"",endvalue:"",tableData:[],multipleSelection:[],options:[{value:"",label:"全部状态"},{value:"待评语",label:"待评语"},{value:"已评阅",label:"已评阅"}],dialogFormVisible:!1,form:{trainingReportName:"",batch:"",fileList:[]},formLabelWidth:"120px",listLoading:!0}},created:function(){var t=this;this.cropId=this.$route.params.cropId,this.cropName=this.$store.getters.cropName;var e={cropId:"17",studentId:"520"};Object(o["h"])(e).then((function(e){t.tableData=e.data.records,t.listLoading=!1})),this.role=this.$store.getters.roles[0],console.log(this.role)},methods:{goback:function(){this.$router.go(-1)},indexNumber:function(t){return t+1},newfetch:function(){var t=this;this.listLoading=!0,this.cropId=this.$route.params.cropId;var e={cropId:"17",studentId:"520"};Object(o["h"])(e).then((function(e){t.tableData=e.data.records,t.listLoading=!1}))},handleSelectionChange:function(t){this.multipleSelection=t},handleLook:function(t,e){this.$router.push("/trainning/lookReport/".concat(e.trainingReportId))},handledeleteOne:function(t,e){console.log(e.trainingReportId);var a={trainingReportId:e.trainingReportId};Object(o["d"])(a).then((function(t){console.log(t)})),this.newfetch()},modifyReport:function(t,e){var a=this;this.isNew="false",console.log(t,e);var i={trainingReportId:e.trainingReportId};Object(o["f"])(i).then((function(t){a.form=t.data})),this.dialogFormVisible=!0},submitEditReport:function(){console.log("this is edit")},handledelete:function(){var t=this;console.log(this.multipleSelection);var e=[];this.$confirm("确定要删除吗?删除后不能恢复","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){for(var a=0;a<t.multipleSelection.length;a++)e[a]=t.multipleSelection[a].trainingReportId,Object(o["c"])(e[a]).then((function(e){console.log(e),t.newfetch()}));t.$message({type:"success",message:"删除成功!"})})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleChange:function(t,e){this.form.fileList=e.slice(-3)},handleSearch:function(t){var e=this;this.listLoading=!0;var a={cropId:"17",studentId:"520",endTime:this.endvalue,startTime:this.startvalue,reviewStatus:this.reviewStatus,trainingReportName:this.inputName};""===a.endTime&&delete a.endTime,""===a.startTime&&delete a.startTime,""===a.reviewStatus&&delete a.reviewStatus,""===a.trainingReportName&&delete a.trainingReportName,console.log(this.reviewStatus),Object(o["h"])(a).then((function(t){e.tableData=t.data.records,e.listLoading=!1,console.log(t)}))},ChangeValue:function(){var t=this;this.listLoading=!0;var e={cropId:"17",studentId:"520",reviewStatus:this.reviewStatus};console.log(this.reviewStatus),Object(o["h"])(e).then((function(e){t.tableData=e.data.records,t.listLoading=!1,console.log(e)}))},createNewReport:function(){this.isNew="true",this.dialogFormVisible=!0},submitNewReport:function(){var t=this,e={cropId:"17",studentId:"520",trainingReportName:this.form.trainingReportName,batch:this.form.batch},a=new FormData;a.append("file",this.form.fileList[0].raw),console.log(e),console.log(this.form.fileList[0]),Object(o["a"])(a,e).then((function(e){"成功！"==e.message?t.$message({message:"提交成功！",type:"success"}):t.$message({message:"提交失败！",type:"error"}),t.newfetch()})),this.dialogFormVisible=!1}}},l=r,s=(a("5e81"),a("2877")),c=Object(s["a"])(l,i,n,!1,null,"6534b014",null);e["default"]=c.exports},cf65:function(t,e,a){}}]);