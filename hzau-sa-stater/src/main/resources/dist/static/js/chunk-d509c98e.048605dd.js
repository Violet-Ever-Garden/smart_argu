(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d509c98e"],{"263c":function(t,e,a){"use strict";var r=a("296c"),n=a.n(r);n.a},"296c":function(t,e,a){},bfb7:function(t,e,a){"use strict";a.d(e,"e",(function(){return n})),a.d(e,"i",(function(){return i})),a.d(e,"d",(function(){return s})),a.d(e,"f",(function(){return o})),a.d(e,"h",(function(){return c})),a.d(e,"g",(function(){return d})),a.d(e,"k",(function(){return l})),a.d(e,"a",(function(){return u})),a.d(e,"c",(function(){return h})),a.d(e,"b",(function(){return f})),a.d(e,"j",(function(){return p}));a("99af"),a("a15b"),a("d81d");var r=a("b775");function n(t){return Object(r["a"])({url:"/class/query",method:"get",params:t})}function i(t){return Object(r["a"])({url:"/asTeacherclass/selectClassManageByTeacherId",method:"get",params:t})}function s(){return Object(r["a"])({url:"/grade/allGrade",method:"get"})}function o(t){return Object(r["a"])({url:"/dataReport/getStudentByCropAndClass",method:"get",params:t})}function c(t){return Object(r["a"])({url:"/dataReport/page?cropId=".concat(t.cropId,"&studentId=").concat(t.studentId),method:"get"})}function d(t){return Object(r["a"])({url:"/dataReport/get/".concat(t.dataReportId),method:"get"})}function l(t){return Object(r["a"])({url:"/dataReport/update",method:"post",data:t})}function u(t){return Object(r["a"])({url:"/dataReport/delete/".concat(t.dataReportId),method:"post"})}function h(t){return Object(r["a"])({url:"/dataReport/exportReportTeacher",method:"get",responseType:"blob",params:t,paramsSerializer:function(e){var a=e.classIds.map((function(t){return"classIds=".concat(t)})).join("&");return"".concat(a,"&cropId=").concat(t.cropId,"&teacherId=").concat(t.teacherId)}})}function f(t){return Object(r["a"])({url:"/dataReport/exportReportStudent",method:"get",responseType:"blob",params:t})}function p(t){return Object(r["a"])({url:"/dataReport/statisticalAnalysis",method:"get",params:{ids:[t]},paramsSerializer:function(t){var e=t.ids.map((function(t){return"ids=".concat(t)})).join("&");return"".concat(e)}})}},f3b1:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"statistic"},[a("div",{staticClass:"left"},[a("div",{staticClass:"header"},[t._v("实训作物")]),a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.data,"show-checkbox":"","node-key":"id","default-expanded-keys":t.id,props:t.defaultProps},on:{check:t.checkChange}})],1),a("div",{staticClass:"right"},[a("div",{staticClass:"rightHeader"},[a("div",{staticClass:"headerLeft"},[t._v("统计分析")]),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-arrow-left"},on:{click:t.goback}},[t._v("返回")])],1),a("div",{staticClass:"btn"},t._l(t.propertyDatas,(function(e,r){return a("div",{key:r,staticClass:"el-btn"},[a("el-button",{attrs:{type:e==t.defaultProperty?"primary":""},on:{click:function(a){return t.changeProperty(e)}}},[t._v(t._s(e))])],1)})),0),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}]},[a("chart",{ref:"mychild",attrs:{height:"500px",width:"100%",transferData:t.transferData}})],1)])])},n=[],i=(a("4de4"),a("4160"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("6062"),a("3ca3"),a("159b"),a("ddb0"),a("2909")),s=a("53ca"),o=a("bfb7"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width},attrs:{id:t.id}})},d=[],l=(a("c975"),a("313e")),u=a.n(l),h=a("ed08"),f={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){this.initListener()},activated:function(){this.$_resizeHandler||this.initListener(),this.resize()},beforeDestroy:function(){this.destroyListener()},deactivated:function(){this.destroyListener()},methods:{$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},initListener:function(){var t=this;this.$_resizeHandler=Object(h["b"])((function(){t.resize()}),100),window.addEventListener("resize",this.$_resizeHandler),this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},destroyListener:function(){window.removeEventListener("resize",this.$_resizeHandler),this.$_resizeHandler=null,this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)},resize:function(){var t=this.chart;t&&t.resize()}}},p={mixins:[f],props:{transferData:{type:Array},className:{type:String,default:"chart"},id:{type:String,default:"chart"},width:{type:String,default:"200px"},height:{type:String,default:"200px"}},data:function(){return{chart:null,detecTime:[],names:[],series:[]}},created:function(){console.log(this.transferData)},mounted:function(){this.initChart()},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},watch:{},methods:{initChart:function(){this.chart=u.a.init(document.getElementById("chart")),this.chart.setOption({backgroundColor:"",title:{top:20,text:"",textStyle:{fontWeight:"normal",fontSize:16,color:"#F1F1F3"},left:"1%"},tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:"#57617B"}}},legend:{top:20,icon:"rect",itemWidth:14,itemHeight:5,itemGap:13,data:this.names,right:"4%",textStyle:{fontSize:12,color:"black"}},grid:{top:100,left:"2%",right:"2%",bottom:"2%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#57617B"}},data:this.detecTime}],yAxis:[{type:"value",name:"(cm)",axisTick:{show:!1},axisLine:{lineStyle:{color:"#57617B"}},axisLabel:{margin:10,textStyle:{fontSize:14}},splitLine:{lineStyle:{color:"#57617B"}}}],series:this.series})},updateData:function(t){var e=this;this.names=[],this.series=[];for(var a=function(a){e.names.push(t[a].studentName);var r=[];t[a].cropDataList.forEach((function(t){return r.push([t.detectionTime,t.average])})),e.series.push({name:t[a].studentName,type:"line",data:r})},r=0;r<t.length;r++)a(r);this.detecTime=[];for(var n=0;n<t.length;n++)t[n].cropDataList.forEach((function(t){return-1==e.detecTime.indexOf(t)&&e.detecTime.push(t.detectionTime)}));console.log(this.names),console.log(this.detecTime),console.log(this.series),this.initChart()}}},m=p,g=a("2877"),b=Object(g["a"])(m,c,d,!1,null,null,null),y=b.exports,v={name:"statistic",data:function(){return{allData:[],data:[],id:[],ids:[],transferData:[],studentDatas:[],propertyDatas:[],defaultProperty:"",defaultProps:{children:"children",label:"label"},listLoading:!0}},methods:{goback:function(){this.$router.go(-1)},checkChange:function(t,e){console.log(e),this.ids=e.checkedKeys.filter((function(t){return"string"!=typeof t})),console.log(this.ids),this.filterStudents(this.ids)},filterStudents:function(t){this.transferData=[];for(var e=0;e<t.length;e++)this.transferData.push(this.studentDatas[t[e]]);console.log(this.transferData),this.filterProperty(this.defaultProperty)},filterProperty:function(t){for(var e=this.deepClone(this.transferData),a=0;a<this.transferData.length;a++){for(var r=[],n=0;n<this.transferData[a].cropDataList.length;n++)this.transferData[a].cropDataList[n].cropProperty==t&&r.push(this.transferData[a].cropDataList[n]);e[a].cropDataList=r}this.$refs["mychild"].updateData(e),console.log(this.transferData),console.log(e)},deepClone:function(t){var e;if("object"===Object(s["a"])(t))if(Array.isArray(t))for(var a in e=[],t)e.push(this.deepClone(t[a]));else if(null===t)e=null;else if(t.constructor===RegExp)e=t;else for(var r in e={},t)e[r]=this.deepClone(t[r]);else e=t;return e},changeProperty:function(t){this.defaultProperty=t,console.log(this.defaultProperty),this.filterStudents(this.ids)}},created:function(){var t=this;console.log(this.$route.params.ids),Object(o["j"])(this.$route.params.ids).then((function(e){t.allData=e.data,console.log(t.allData);for(var a=0;a<t.allData.length;a++){t.data.push({label:t.allData[a].cropName,id:"idi".concat(a),children:[]});for(var r=t.allData[a].gradeDataReports,n=0;n<r.length;n++){t.data[a].children.push({label:r[n].gradeName,id:"idj".concat(n),children:[]});for(var s=r[n].classDataReports,o=0;o<s.length;o++){t.data[a].children[n].children.push({label:s[o].className,id:"idz".concat(o),children:[]});for(var c=s[o].studentDataReports,d=0;d<c.length;d++)t.data[a].children[n].children[o].children.push({label:c[d].studentName,id:d+o+n+a}),t.id.push(d),t.studentDatas.push(c[d]),console.log(t.studentDatas)}}}for(var l=0;l<t.studentDatas.length;l++)t.studentDatas[l].cropDataList.forEach((function(e){return t.propertyDatas.push(e.cropProperty)}));t.propertyDatas=Object(i["a"])(new Set(t.propertyDatas)),t.defaultProperty=t.propertyDatas[0],t.listLoading=!1}))},components:{Chart:y}},D=v,L=(a("263c"),Object(g["a"])(D,r,n,!1,null,"f8170cc6",null));e["default"]=L.exports}}]);