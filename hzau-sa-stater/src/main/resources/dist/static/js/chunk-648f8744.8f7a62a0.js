(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-648f8744"],{"09f4":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),Math.easeInOutQuad=function(t,e,n,a){return t/=a/2,t<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e)};var a=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function r(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function i(t,e,n){var i=o(),c=t-i,s=20,l=0;e="undefined"===typeof e?500:e;var u=function t(){l+=s;var o=Math.easeInOutQuad(l,i,c,e);r(o),l<e?a(t):n&&"function"===typeof n&&n()};u()}},"0f7b":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cropdetail"},[n("div",{staticClass:"line"},[n("span",[t._v("|")]),n("span",[t._v(t._s(t.cropName))])]),n("div",{staticClass:"header"},[n("div",{staticClass:"left"},[n("el-select",{staticStyle:{"margin-right":"2%"},attrs:{placeholder:"请选择"},on:{change:function(e){return t.select(t.value)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),n("el-input",{staticStyle:{"margin-right":"2%"},attrs:{placeholder:"请输入名称"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),n("el-button",{attrs:{size:"medium"},on:{click:t.search}},[t._v("搜索")])],1),n("div",{staticClass:"right"},[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-arrow-left"},on:{click:t.goback}},[t._v("返回")]),n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-tickets"},on:{click:t.exportReport}},[t._v("导出实训报告")]),n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-receiving"},on:{click:t.exportData}},[t._v("导出调查数据")])],1)]),n("div",{staticClass:"content"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"77"}}),n("el-table-column",{attrs:{label:"序号",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.$index+1))]}}])}),n("el-table-column",{attrs:{prop:"className",label:"班级",width:"200"}}),n("el-table-column",{attrs:{prop:"classGrade",label:"年级",width:"200"}}),n("el-table-column",{attrs:{prop:"classFields",label:"地块",width:"240","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){return t.handleLook(e.$index,e.row)}}},[n("i",{staticClass:"el-icon-view"})])]}}])})],1)],1),n("div",{staticClass:"pagination"},[n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getAllclassData}})],1)])},r=[],o=(n("99af"),n("4160"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("2b3d"),n("bfb7")),i=n("333d"),c=n("1c31"),s={name:"Cropdetail",data:function(){return{total:0,listQuery:{page:1,limit:20},options:[{value:"",label:"全部年级"}],cropId:"",cropName:"",value:"",input:"",tableData:[],multipleSelection:[],listLoading:!1}},created:function(){this.cropId=this.$route.params.cropId;this.getAllclassData(),this.getAllGrade()},components:{Pagination:i["a"]},methods:{goback:function(){this.$router.go(-1)},exportReport:function(){if(this.multipleSelection.length){var t=[];this.multipleSelection.forEach((function(e){return t.push(e.classId)}));var e={cropId:this.cropId,teacherId:this.$store.getters.id,classIds:t};console.log(e),Object(c["e"])(e).then((function(t){var e=new Blob([t.data]),n=document.createElement("a"),a=window.URL.createObjectURL(e);n.href=a,n.download="实训报告.zip",document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(a)}))}else this.$message({type:"warning",message:"至少选择其中的一项"})},exportData:function(){if(this.multipleSelection.length){var t=[];this.multipleSelection.forEach((function(e){return t.push(e.classId)}));var e={cropId:this.cropId,teacherId:this.$store.getters.id,classIds:t};Object(o["c"])(e).then((function(t){var e=new Blob([t.data]),n=document.createElement("a"),a=window.URL.createObjectURL(e);n.href=a,n.download="总数据.zip",document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(a)}))}else this.$message({type:"warning",message:"至少选择其中的一项"})},handleSelectionChange:function(t){this.multipleSelection=t},handleLook:function(t,e){this.cropId,this.tableData[t].classId;this.$router.push("/trainning/classdata/".concat(this.cropId,"/").concat(this.tableData[t].classId))},getAllclassData:function(t){var e=this;if(this.listLoading=!0,"admin"==this.$store.getters.roles[0])Object(o["e"])(t).then((function(t){e.tableData=t.data.rows,e.total=t.data.total,e.listLoading=!1}));else{var n={teacherId:this.$store.getters.id};Object(o["i"])(n).then((function(t){e.tableData=t.data.records,e.total=t.data.total,e.listLoading=!1}))}},getAllGrade:function(){var t=this;Object(o["d"])().then((function(e){for(var n=0;n<e.data.length;n++)t.options.push({value:e.data[n],label:e.data[n]})})),console.log(this.options)},select:function(t){var e={grade:t};this.getAllclassData(e)},search:function(){var t={name:this.input};this.getAllclassData(t)}}},l=s,u=(n("82b0"),n("2877")),d=Object(u["a"])(l,a,r,!1,null,"478e1539",null);e["default"]=d.exports},"1c31":function(t,e,n){"use strict";n.d(e,"h",(function(){return r})),n.d(e,"g",(function(){return o})),n.d(e,"a",(function(){return i})),n.d(e,"f",(function(){return c})),n.d(e,"e",(function(){return s})),n.d(e,"d",(function(){return l})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return d}));n("99af"),n("a15b"),n("d81d");var a=n("b775");function r(t){return Object(a["a"])({url:"/trainingReport/page",method:"get",params:{cropId:t.cropId,studentId:t.studentId,limit:"10",page:"1",reviewStatus:t.reviewStatus,trainingReportName:t.trainingReportName,endTime:t.endTime,startTime:t.startTime}})}function o(t){return Object(a["a"])({url:"/trainingReport/teachertView",method:"get",params:{trainingReportId:t.trainingReportId}})}function i(t,e){return Object(a["a"])({url:"/trainingReport/addTrainingReport",method:"post",params:{studentId:e.studentId,batch:e.batch,cropId:e.cropId,trainingReportName:e.trainingReportName},data:t})}function c(t){return Object(a["a"])({url:"/trainingReport/studentView",method:"get",params:{trainingReportId:t.trainingReportId}})}function s(t){return Object(a["a"])({url:"/trainingReport/exportReport",method:"get",responseType:"blob",params:t,paramsSerializer:function(e){var n=e.classIds.map((function(t){return"classIds%5B%5D=".concat(t)})).join("&");return"".concat(n,"&cropId=").concat(t.cropId,"&teacherId=").concat(t.teacherId)}})}function l(t){return Object(a["a"])({url:"/trainingReport/deleteTrainingReport",method:"post",params:{trainingReportId:t.trainingReportId}})}function u(t){return Object(a["a"])({url:"/trainingReport/deleteTrainingReports",method:"post",params:{trainingReportIds:t}})}function d(t){return Object(a["a"])({url:"/trainingReport/changeReportByTeacher",method:"post",params:{comments:t.comments,score:t.score,trainingReportId:t.trainingReportId}})}},"542b":function(t,e,n){},"82b0":function(t,e,n){"use strict";var a=n("542b"),r=n.n(a);r.a},bfb7:function(t,e,n){"use strict";n.d(e,"e",(function(){return r})),n.d(e,"i",(function(){return o})),n.d(e,"d",(function(){return i})),n.d(e,"f",(function(){return c})),n.d(e,"h",(function(){return s})),n.d(e,"g",(function(){return l})),n.d(e,"k",(function(){return u})),n.d(e,"a",(function(){return d})),n.d(e,"c",(function(){return p})),n.d(e,"b",(function(){return m})),n.d(e,"j",(function(){return f}));n("99af"),n("a15b"),n("d81d");var a=n("b775");function r(t){return Object(a["a"])({url:"/class/query",method:"get",params:t})}function o(t){return Object(a["a"])({url:"/asTeacherclass/selectClassManageByTeacherId",method:"get",params:t})}function i(){return Object(a["a"])({url:"/grade/allGrade",method:"get"})}function c(t){return Object(a["a"])({url:"/dataReport/getStudentByCropAndClass",method:"get",params:t})}function s(t){return Object(a["a"])({url:"/dataReport/page?cropId=".concat(t.cropId,"&studentId=").concat(t.studentId),method:"get"})}function l(t){return Object(a["a"])({url:"/dataReport/get/".concat(t.dataReportId),method:"get"})}function u(t){return Object(a["a"])({url:"/dataReport/update",method:"post",data:t})}function d(t){return Object(a["a"])({url:"/dataReport/delete/".concat(t.dataReportId),method:"post"})}function p(t){return Object(a["a"])({url:"/dataReport/exportReportTeacher",method:"get",responseType:"blob",params:t,paramsSerializer:function(e){var n=e.classIds.map((function(t){return"classIds=".concat(t)})).join("&");return"".concat(n,"&cropId=").concat(t.cropId,"&teacherId=").concat(t.teacherId)}})}function m(t){return Object(a["a"])({url:"/dataReport/exportReportStudent",method:"get",responseType:"blob",params:t})}function f(t){return Object(a["a"])({url:"/dataReport/statisticalAnalysis",method:"get",params:{ids:[t]},paramsSerializer:function(t){var e=t.ids.map((function(t){return"ids=".concat(t)})).join("&");return"".concat(e)}})}}}]);